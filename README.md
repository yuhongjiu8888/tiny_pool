# tiny_pool
### 简单的STL内存池

  通过修改默认STL内存申请分配方法，改为使用tiny_pool内存池分配方式。可以有效提供小内存的快速申请和避免内存不连续问题。
  #### STL内存分配
    1.STL内存分配分为一级分配器和二级分配器，一级分配器就是采用malloc分配内存，二级分配器采用内存池。
    2.二级分配器设计的非常巧妙，分别给8 byte，16 byte,…, 128 byte 等比较小的内存片都维持一个空闲链表，每个链表的头节点由一个数组来维护。需要分配内存时从合适大小的链表中取一块下来。假设需要分配一块10 byte 的内存，那么就找到最小的大于等于10 byte 的块，也就是16 byte，从16 byte 的空闲链表里取出一个用于分配。释放该块内存时，将内存节点归还给链表。
    3.如果要分配的内存大于128K则直接调用一级分配器。
    4.链接链表时直接就地存储 next 指针，64 位操作系统指针占 8 byte，所以内存池维护的空闲链表不能小于 8 byte。
    5.next 指针可以采用 union 实现，也可以直接指针强制转换。
  #### 单例模式
    确保进程里只有一个我们实现的内存池实例。
  #### 原子操作 
    compare_exchange_weak：无锁地实现并发，确保多个线程可以并发地调用我们实现的内存池进行内存分配。
